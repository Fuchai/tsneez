!function(t,e,n,o,r){function a(){var t=l.selectAll("text").data(v.words,function(t){return t});t.enter().append("text").attr("class","enter").text(function(t){return t});var e=w.Y;t.attr("transform",function(t,n){return"translate("+(200*e.get(n,0)*m+f+400)+","+(200*e.get(n,1)*m+p+400)+")"})}function s(){var t=e(".viewport").width(),n=400;l.attr("width",t).attr("height",n)}function i(){var t=n.select(".viewport");l=t.append("svg"),u(l),s()}function c(){f=n.event.translate[0],p=n.event.translate[1],m=n.event.scale}function d(){var t=w.step(),n=Math.round(w.iter/(o.now()-g)*1e3);e("#cost").html("iteration "+w.iter+", fps: "+n+", cost: "+t),a(),requestAnimationFrame(d)}var v,l,w=new t.TSNE({theta:.8}),u=n.behavior.zoom().scaleExtent([.1,10]).center([0,0]).on("zoom",c);n.select(window).on("resize",s);var f=0,p=0,m=1,g=o.now();e(window).load(function(){e.getJSON("/data/wordvecs50dtop1000.json",function(t){var o=800;v={words:t.words.slice(0,o),vecs:t.vecs.slice(0,o)},w.initData(v.vecs),i(),requestAnimationFrame(d),e("#cost").click(function(){console.log("adding word",t.words[o]),w.add(t.vecs[o]),o++,v.words=t.words.slice(0,o),n.selectAll(".viewport > svg").remove(),i()})})})}(tsne,$,d3,performance,tsnejs);