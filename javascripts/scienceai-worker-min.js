"use strict";function isBusy(){postMessage({type:"STATUS",data:"BUSY"})}function isReady(){postMessage({type:"STATUS",data:"READY"})}importScripts("scienceai-tsne.min.js"),isBusy();var model=new TSNE({dim:2,perplexity:30,earlyExaggeration:4,learningRate:1e3,nIter:300,metric:"euclidean"}),firstRun=!0;self.onmessage=function(e){var t=e.data;switch(t.type){case"INPUT_DATA":isBusy(),model.init({data:t.data,type:"dense"}),isReady();break;case"RUN":isBusy(),model.perplexity=t.data.perplexity,model.earlyExaggeration=t.data.earlyExaggeration,model.learningRate=t.data.learningRate,model.nIter=t.data.nIter,model.metric=t.data.metric,firstRun?(model.run(),firstRun=!1):model.rerun(),postMessage({type:"DONE",data:model.getOutputScaled()}),isReady()}},model.on("progressIter",function(e){postMessage({type:"PROGRESS_ITER",data:e})}),model.on("progressStatus",function(e){postMessage({type:"PROGRESS_STATUS",data:e})}),model.on("progressData",function(e){postMessage({type:"PROGRESS_DATA",data:e})});